        pagina_escolhida = st.selectbox("Navegar para:", opcoes, key="navegacao_sidebar", label_visibility="collapsed")
        st.session_state.pagina_atual = pagina_escolhida

        st.markdown("---")

        # Botão de Meu Perfil (na Sidebar)
            if st.button("👤 Meu Perfil", use_container_width=True):
               st.session_state.pagina_atual = "👤 Meu Perfil"

            # Garantir que a chave 'confirmar_logout' exista
            if 'confirmar_logout' not in st.session_state:
                st.session_state.confirmar_logout = False

            # Botão de Logout
            if st.session_state.usuario_logado:
                if st.button("🚪 Logout", use_container_width=True):
                   st.session_state.confirmar_logout = True

            # Verificação de logout
            if st.session_state.confirmar_logout:
                st.warning("Tem certeza que deseja sair?")
                col1, col2 = st.columns(2)
                with col1:
                    if st.button("❌ Cancelar", use_container_width=True):
                        st.session_state.confirmar_logout = False
                with col2:
                    if st.button("✅ Confirmar", use_container_width=True):
                        usuarios = st.session_state.get("usuarios", {})
                        st.session_state.clear()
                        st.session_state.usuario_logado = False
                        st.session_state.usuarios = usuarios
                        st.session_state.pagina_atual = "login"
                        st.rerun()

        # --- CONTEÚDO PRINCIPAL DAS PÁGINAS ---
        if st.session_state.pagina_atual == "🏠 Tela Principal":
            st.success(f"Bem-vindo, {st.session_state.nome}!")

        elif st.session_state.pagina_atual == "👤 Meu Perfil":
            st.title("👤 Meu Perfil")

            tipo_usuario = st.session_state.get("tipo_usuario", "Usuário")
            nome = st.session_state.get("nome", "Nome não encontrado")
            email = st.session_state.get("login_email") or next(
                (e for e, u in st.session_state.usuarios.items() if u["nome"] == nome), None
            )

            usuarios = st.session_state.get("usuarios", {})
            if not nome or not email or email not in usuarios:
                st.error("Usuário não identificado ou sessão inválida.")
                st.stop()
                st.rerun()

            usuario = usuarios[email]

            with st.container():
                st.markdown(f"""
                <div style="text-align: left; padding: 20px;">
                    <h3>📋 Informações Cadastradas</h3>
                    <div style="font-size: 18px; line-height: 1.6;">
                        <p><strong>Nome completo:</strong> {usuario['nome']}</p>
                        <p><strong>Posição:</strong> {usuario['posicao']}</p>
                        <p><strong>Data de nascimento:</strong> {usuario['nascimento']}</p>
                        <p><strong>Telefone:</strong> {usuario['telefone']}</p>
                        <p><strong>E-mail:</strong> {email}</p>
                    </div>
                </div>
                """, unsafe_allow_html=True)

                st.markdown("<hr style='border: 1px solid #ddd;'>", unsafe_allow_html=True)

                st.subheader("🔑 Atualizar senha e palavra-chave")
                with st.form("form_atualizar_senha"):
                    nova_senha = st.text_input("Nova senha", type="password")
                    nova_palavra_chave = st.text_input("Nova palavra-chave")
                    confirmar = st.form_submit_button("Atualizar")

                if confirmar:
                    if nova_senha:
                        usuario["senha"] = nova_senha
                    if nova_palavra_chave:
                        usuario["palavra_chave"] = nova_palavra_chave
                    st.success("Informações atualizadas com sucesso!")

                st.markdown("<hr style='border: 1px solid #ddd;'>", unsafe_allow_html=True)
                if st.button("🔙 Voltar para Tela Principal"):
                    st.session_state.pagina_atual = "🏠 Tela Principal"
                    st.rerun()